# qemu-tracer使用说明文档
该文档描述qemu-traer的开发实现细节、功能和使用方法

### 实现细节
 ##### vl.c文件
   1. qemu-tracer对vl.c文件进行了修改，主要用来读取配置文件，配置文件的名字固定为configs.txt
   2. qemu-tracer需要通过一个配置文件来指定寄存器和对应的函数位置之间的关系，该文件放在configs/reg_map.txt中，目前内容如下：
       ```
        32 R_EAX 0 --> 0
        32 R_EAX 1 --> 0
        32 R_ECX 2 --> 1
        32 R_EDX 3 --> 2 
        64 R_EAX 0 --> 0
        64 R_EDI 1 --> 7
        64 R_ESI 2 --> 6 
        64 R_EDX 3 --> 2
        64 R_ECX 4 --> 1
        64 R_8 5 --> 8
        64 R_9 6 --> 9
      ```
      第一列表示平台位数，第二列为寄存器，第三列为参数的位置（其中0表示返回值），第四列位“-->”，第五列为QEMU-TRACER中寄存器定义的宏(该值与第二列绑定)
    3. 配置文件中，返回值必须出现在参数之前，而且，当没有配置返回值时，默认按照int输出

##### cpu-exec.c文件
  1. 截获qemu中的函数调用和返回主要通过修改该文件实现
  2. 在	
    
##### include/comm_struct文件夹

##### 配置跟踪类型

### 注意
 1. qemu-tracer在去读字符串时，当读取的内容位缓冲区的时候，可能出现一些比较奇怪的字符，这是由于QEMU-TRACER并不知道缓冲区的大小，所以只能以字符串的方式输出，如果缓冲区末尾不是以'\0'结尾，那可能出现多余字符
 
